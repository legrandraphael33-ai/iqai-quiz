<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IQAI Test - I Quit AI</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  *{box-sizing:border-box;margin:0;padding:0;}
  :root{
    --title-font:'Press Start 2P', monospace;
    --body-font:'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  body{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    background: linear-gradient(135deg,#f4cda7,#e7a86a);
    padding:20px;
    font-family: var(--body-font);
  }
  h1{
    font-family: var(--title-font);
    font-size:2.25em;
    margin-bottom:8px;
    text-align:center;
    line-height:1.15;
    letter-spacing:0.5px;
    text-shadow: 0 2px 10px rgba(0,0,0,0.18);
  }
  h1 span{display:inline-block;}
  .title-sep{margin:0 10px;opacity:0.92;transform:translateY(-1px);}
  p.subtitle{
    text-align:center;
    margin-bottom:24px;
    font-size:1.45em;
    font-weight:800;
    color:#ffffff;
    text-shadow:0 3px 12px rgba(0,0,0,0.28);
    letter-spacing:0.2px;
  }
  .container{
    max-width:550px;width:100%;
    background:#ffffff;color:#333;
    border-radius:18px;
    padding:26px;
    box-shadow:0 10px 28px rgba(0,0,0,0.18);
  }
  .question{margin-bottom:14px;font-weight:800;font-size:1.05em;line-height:1.35;}
  .options button{
    margin:6px 0;width:100%;
    padding:12px 14px 12px 44px;
    border:none;border-radius:12px;
    background:#ff8f00;color:#fff;
    cursor:pointer;font-weight:800;
    transition:0.2s;position:relative;text-align:left;
    font-family:var(--body-font);font-size:1em;
  }
  .options button:hover{background:#f57c00;}
  .options button.selected{
    background:#263238 !important;
    outline:3px solid rgba(255,143,0,0.55);
    box-shadow:0 8px 18px rgba(0,0,0,0.15);
    transform:translateY(1px);
  }
  .options button::before{
    content:"";
    position:absolute;left:12px;top:50%;
    transform:translateY(-50%);
    width:20px;height:20px;border-radius:6px;
    border:2px solid rgba(255,255,255,0.8);
    background:rgba(255,255,255,0.12);
  }
  .options button.selected::before{
    content:"‚úì";
    display:flex;align-items:center;justify-content:center;
    font-weight:900;color:#fff;
    background:rgba(255,255,255,0.25);
  }
  #nextBtn{
    margin-top:12px;width:100%;
    padding:12px;border:none;border-radius:12px;
    background:#263238;color:#fff;
    cursor:pointer;font-weight:800;
    transition:0.2s;font-family:var(--body-font);font-size:1em;
  }
  #nextBtn:hover{filter:brightness(1.05);}
  #nextBtn:disabled{opacity:0.55;cursor:not-allowed;}
  .score,.streak,.feedback{text-align:center;margin-top:10px;}
  .feedback{font-style:italic;color:#27ae60;font-weight:700;}
  #perfectToken{margin-top:15px;text-align:center;}
  #shareBtn{
    margin-top:10px;padding:10px 15px;
    background:#0077b5;color:#fff;border:none;border-radius:10px;
    cursor:pointer;font-weight:800;display:block;margin-left:auto;margin-right:auto;
  }
  #restartBtn{
    margin-top:12px;width:100%;
    padding:12px;border:none;border-radius:12px;
    background:#37474f;color:#fff;cursor:pointer;font-weight:800;
  }
  .hidden{display:none;}
  #reviewContainer{margin-top:18px;}
  #reviewContainer h3{margin:8px 0 10px;font-size:1.05em;}
  .reviewItem{
    padding:10px 12px;border:1px solid rgba(0,0,0,0.08);
    border-radius:12px;margin-bottom:10px;
    background:rgba(0,0,0,0.02);
    line-height:1.35;font-size:0.98em;
  }
</style>
</head>

<body>
  <h1 id="title"></h1>
  <p class="subtitle">I Quit AI</p>

  <div class="container">
    <div id="quiz">
      <div id="questionContainer"></div>
      <div class="options" id="optionsContainer"></div>
      <button id="nextBtn" disabled>Suivant</button>
    </div>

    <div id="result" class="hidden">
      <p class="score" id="scoreDisplay"></p>
      <p class="feedback" id="feedbackDisplay"></p>
      <p class="streak" id="streakDisplay"></p>
      <canvas id="perfectToken" class="hidden" width="400" height="200"></canvas>
      <button id="shareBtn" class="hidden">Partager sur LinkedIn</button>
      <div id="reviewContainer"></div>
      <button id="restartBtn">Rejouer demain</button>
    </div>
  </div>

<script>
  // Title
  const colors=["#FF4136","#FFDC00","#2ECC40","#0074D9","#FF851B","#B10DC9"];
  const titleContainer=document.getElementById("title");
  const parts=["IQAI","Test"];
  let colorIndex=0;
  function addColored(text){
    text.split("").forEach((c,i)=>{
      const s=document.createElement("span");
      s.textContent=c;
      s.style.color=colors[(colorIndex+i)%colors.length];
      titleContainer.appendChild(s);
    });
    colorIndex += text.length;
  }
  addColored(parts[0]);
  const sep=document.createElement("span");
  sep.textContent=" | ";
  sep.className="title-sep";
  sep.style.color="rgba(255,255,255,0.92)";
  titleContainer.appendChild(sep);
  addColored(parts[1]);

  // Questions (temp)
  const questions = [
    {q:"Combien font 23 x 17 ?",options:["391","401","403","421"],answer:"391",explanation:"23 x 17 = 391"},
    {q:"Quelle forme est correcte ?",options:["Je vais all√©","Je vais aller","Je vas aller","Je va all√©"],answer:"Je vais aller",explanation:"Futur proche correct : 'Je vais aller'"},
    {q:"Traduire 'to challenge oneself' en fran√ßais",options:["Se d√©tendre","Se challenger","Se lever","S'amuser"],answer:"Se challenger",explanation:"L'expression correcte est 'se challenger'"},
    {q:"Qui a √©crit 'Les Mis√©rables' ?",options:["Victor Hugo","Emile Zola","Alphonse Daudet","Stendhal"],answer:"Victor Hugo",explanation:"Victor Hugo est l'auteur"},
    {q:"Compl√©tez la suite : 2, 3, 5, 8, 12, ?",options:["15","16","17","18"],answer:"17",explanation:"R√®gle : +1,+2,+3,+4,+5... Donc 12+5=17"},
    {q:"Capitale de la Croatie ?",options:["Split","Zagreb","Dubrovnik","Rijeka"],answer:"Zagreb",explanation:"Zagreb est la capitale"},
    {q:"F√©minin de 'h√©ros'",options:["H√©rosse","H√©resse","H√©ro√Øne","H√©ruine"],answer:"H√©ro√Øne",explanation:"Le f√©minin correct est 'H√©ro√Øne'"},
    {q:"Traduire 'reliable' en fran√ßais",options:["Fiable","Rapide","Fort","Agr√©able"],answer:"Fiable",explanation:"Reliable = Fiable"},
    {q:"Ann√©e du premier pas sur la lune ?",options:["1965","1969","1971","1967"],answer:"1969",explanation:"Neil Armstrong a march√© sur la lune en 1969"},
    {q:"R√©soudre : 18 √∑ (3+3) + 4 ?",options:["7","8","6","10"],answer:"7",explanation:"18 √∑ 6 + 4 = 3 + 4 = 7"}
  ];

  let current=0, score=0;
  const userAnswers = new Array(questions.length).fill(null);

  const questionContainer=document.getElementById('questionContainer');
  const optionsContainer=document.getElementById('optionsContainer');
  const nextBtn=document.getElementById('nextBtn');

  const quizDiv=document.getElementById('quiz');
  const resultDiv=document.getElementById('result');

  const scoreDisplay=document.getElementById('scoreDisplay');
  const feedbackDisplay=document.getElementById('feedbackDisplay');
  const streakDisplay=document.getElementById('streakDisplay');

  const perfectTokenCanvas=document.getElementById('perfectToken');
  const shareBtn=document.getElementById('shareBtn');
  const restartBtn=document.getElementById('restartBtn');
  const reviewContainer=document.getElementById('reviewContainer');

  // Streak
  const todayKey=new Date().toDateString();
  let streak=parseInt(localStorage.getItem('streak')||'0');
  let lastPlayed=localStorage.getItem('lastPlayed');
  if(lastPlayed!==todayKey && lastPlayed!==new Date(Date.now()-86400000).toDateString()) streak=0;

  function showQuestion(){
    const q=questions[current];
    questionContainer.innerHTML=`<div class="question">${current+1}. ${q.q}</div>`;
    optionsContainer.innerHTML='';
    nextBtn.disabled=true;

    q.options.forEach(opt=>{
      const btn=document.createElement('button');
      btn.textContent=opt;
      if(userAnswers[current]===opt) btn.classList.add('selected');
      btn.onclick=()=>selectOption(opt);
      optionsContainer.appendChild(btn);
    });
  }

  function selectOption(selected){
    userAnswers[current]=selected;
    Array.from(optionsContainer.children).forEach(btn=>{
      btn.classList.toggle('selected', btn.textContent===selected);
    });
    nextBtn.disabled=false;
  }

  nextBtn.onclick=()=>{
    const selected=userAnswers[current];
    if(selected===questions[current].answer) score++;
    current++;
    if(current<questions.length) showQuestion();
    else showResult();
  };

  function generateTokenImage(){
    const ctx=perfectTokenCanvas.getContext('2d');
    ctx.clearRect(0,0,400,200);
    ctx.fillStyle="#f1c40f";
    ctx.fillRect(0,0,400,200);
    ctx.fillStyle="#2c3e50";
    ctx.font="18px 'Press Start 2P'";
    ctx.textAlign="center";
    ctx.fillText("üéâ Perfect Score üéâ",200,40);
    ctx.fillText(`"AI? I Quit!"`,200,80);
    ctx.fillText("Napol√©on approves üòé",200,120);
    return perfectTokenCanvas.toDataURL();
  }

  function showResult(){
    quizDiv.classList.add('hidden');
    resultDiv.classList.remove('hidden');

    scoreDisplay.textContent=`Votre score : ${score} / ${questions.length}`;
    feedbackDisplay.textContent=
      score===questions.length ? "Parfait ! Vous √™tes un g√©nie !" :
      score>4 ? "Bien jou√©, continuez !" :
      "Courage, essayez encore demain !";

    streak++;
    localStorage.setItem('streak',streak);
    localStorage.setItem('lastPlayed',todayKey);
    streakDisplay.textContent=`Streak actuel : ${streak} jours`;

    if(score===questions.length){
      perfectTokenCanvas.classList.remove('hidden');
      const imgData=generateTokenImage();
      shareBtn.classList.remove('hidden');
      shareBtn.onclick=()=>{
        const url="https://www.linkedin.com/sharing/share-offsite/?url="+encodeURIComponent(window.location.href);
        window.open(url,'_blank');
      };
    }

    reviewContainer.innerHTML="<h3>Review des questions</h3>";
    questions.forEach((q,i)=>{
      const div=document.createElement('div');
      div.className="reviewItem";
      div.innerHTML=`
        <strong>Q${i+1}:</strong> ${q.q}<br>
        <strong>Votre r√©ponse:</strong> ${userAnswers[i] ?? "‚Äî"}<br>
        <strong>Bonne r√©ponse:</strong> ${q.answer}<br>
        <em>Explication:</em> ${q.explanation}
      `;
      reviewContainer.appendChild(div);
    });
  }

  restartBtn.onclick=()=>{
    current=0; score=0;
    for(let i=0;i<userAnswers.length;i++) userAnswers[i]=null;

    quizDiv.classList.remove('hidden');
    resultDiv.classList.add('hidden');
    perfectTokenCanvas.classList.add('hidden');
    shareBtn.classList.add('hidden');
    reviewContainer.innerHTML="";
    showQuestion();
  };

  showQuestion();
</script>
</body>
</html>
