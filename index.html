<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IQAI Test - I Quit AI</title>

  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    *{box-sizing:border-box;margin:0;padding:0;}
    :root{
      --title-font:'Press Start 2P', monospace;
      --body-font:'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    body{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      background: linear-gradient(135deg,#f0c79e,#e3a56b);
      padding:20px;
      font-family: var(--body-font);
      overflow-x:hidden;
    }

    h1{
      font-family: var(--title-font);
      font-size:2.25em;
      margin-bottom:8px;
      text-align:center;
      line-height:1.15;
      letter-spacing:0.5px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.18);
    }
    h1 span{display:inline-block;}
    .title-sep{
      margin:0 10px;
      opacity:0;
      transform:translateY(-1px);
      display:inline-block;
      color:rgba(255,255,255,0.92);
    }
    .title-sep.blink{
      animation: blink 0.8s step-end infinite;
    }

    @keyframes blink{
      0%, 50% { opacity:1; }
      51%, 100% { opacity:0; }
    }

    p.subtitle{
      text-align:center;
      margin-bottom:24px;
      font-size:1.45em;
      font-weight:800;
      color:#ffffff;
      text-shadow:0 3px 12px rgba(0,0,0,0.28);
      letter-spacing:0.2px;
    }

    .container{
      max-width:560px;width:100%;
      background:#ffffff;color:#333;
      border-radius:18px;
      padding:26px;
      box-shadow:0 10px 28px rgba(0,0,0,0.18);
    }

    /* ========== SLIDER DE D√âMARRAGE ========== */
    #startScreen{
      text-align:center;
      padding:40px 20px;
    }
    #startScreen h2{
      font-family: var(--title-font);
      font-size:1.5em;
      margin-bottom:30px;
      color:#263238;
      text-shadow: 2px 2px 0 rgba(255,143,0,0.3);
    }

    .slider-container{
      position:relative;
      width:100%;
      max-width:400px;
      height:70px;
      background: linear-gradient(135deg, #263238, #37474f);
      border-radius:40px;
      margin:0 auto;
      box-shadow: 
        inset 0 4px 8px rgba(0,0,0,0.3),
        0 4px 12px rgba(0,0,0,0.2);
      overflow:hidden;
      border:3px solid #ff8f00;
    }

    .slider-track{
      position:absolute;
      top:0;left:0;
      width:100%;height:100%;
      display:flex;
      align-items:center;
      padding:0 10px;
      pointer-events:none;
    }

    .slider-text{
      font-family: var(--title-font);
      font-size:0.9em;
      color:#ff8f00;
      text-transform:uppercase;
      letter-spacing:2px;
      margin-left:20px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }

    .slider-button{
      position:absolute;
      left:5px;
      top:50%;
      transform:translateY(-50%);
      width:60px;
      height:60px;
      background: linear-gradient(135deg, #ff8f00, #f57c00);
      border-radius:50%;
      cursor:grab;
      box-shadow: 0 4px 12px rgba(255,143,0,0.6);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1.8em;
      user-select:none;
      touch-action:none;
      transition: transform 0.1s, box-shadow 0.1s;
    }
    .slider-button:active{
      cursor:grabbing;
      transform:translateY(-50%) scale(0.95);
      box-shadow: 0 2px 8px rgba(255,143,0,0.8);
    }

    /* ========== TIMER ========== */
    #timerDisplay{
      position:absolute;
      top:10px;
      right:10px;
      font-family: var(--title-font);
      font-size:1.2em;
      font-weight:900;
      color:#27ae60;
      background:rgba(255,255,255,0.9);
      padding:8px 16px;
      border-radius:20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      min-width:60px;
      text-align:center;
    }
    #timerDisplay.warning{
      color:#e74c3c;
      animation: pulse 0.5s ease-in-out infinite;
    }
    @keyframes pulse{
      0%, 100% { transform:scale(1); }
      50% { transform:scale(1.1); }
    }

    .question{
      margin-bottom:14px;
      font-weight:800;
      font-size:1.05em;
      line-height:1.35;
      padding-top:30px;
    }

    .options button{
      margin:6px 0;
      width:100%;
      padding:12px 14px 12px 44px;
      border:none;
      border-radius:12px;
      background:#ff8f00;
      color:#fff;
      cursor:pointer;
      font-weight:800;
      transition:0.2s;
      position:relative;
      text-align:left;
      font-family:var(--body-font);
      font-size:1em;
    }
    .options button:hover{background:#f57c00;}

    .options button.selected{
      background:#263238 !important;
      outline:3px solid rgba(255,143,0,0.55);
      box-shadow:0 8px 18px rgba(0,0,0,0.15);
      transform:translateY(1px);
    }
    .options button::before{
      content:"";
      position:absolute;left:12px;top:50%;
      transform:translateY(-50%);
      width:20px;height:20px;border-radius:6px;
      border:2px solid rgba(255,255,255,0.85);
      background:rgba(255,255,255,0.12);
    }
    .options button.selected::before{
      content:"‚úì";
      display:flex;align-items:center;justify-content:center;
      font-weight:900;color:#fff;
      background:rgba(255,255,255,0.25);
    }

    #nextBtn{
      margin-top:12px;width:100%;
      padding:12px;border:none;border-radius:12px;
      background:#263238;color:#fff;
      cursor:pointer;font-weight:800;
      transition:0.2s;
      font-family:var(--body-font);
      font-size:1em;
    }
    #nextBtn:hover{filter:brightness(1.05);}
    #nextBtn:disabled{opacity:0.55;cursor:not-allowed;}

    .score,.streak,.feedback{text-align:center;margin-top:10px;}
    .feedback{font-style:italic;color:#27ae60;font-weight:800;}

    .hidden{display:none !important;}

    #reviewContainer{margin-top:18px;}
    #reviewContainer h3{margin:8px 0 10px;font-size:1.05em;}
    .reviewItem{
      padding:10px 12px;
      border:1px solid rgba(0,0,0,0.08);
      border-radius:12px;margin-bottom:10px;
      background:rgba(0,0,0,0.02);
      line-height:1.35;
      font-size:0.98em;
    }

    .answerTag{
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      font-weight:900;
      line-height:1.2;
    }
    .answerTag.ok{
      background: rgba(39,174,96,0.12);
      border: 1px solid rgba(39,174,96,0.35);
      color:#1f7a3f;
    }
    .answerTag.bad{
      background: rgba(255,60,120,0.14);
      border: 1px solid rgba(255,60,120,0.40);
      color:#a8164a;
    }

    .errorBox{
      margin-top:10px;
      padding:12px;
      border-radius:12px;
      background:#fff3f3;
      border:1px solid rgba(255,0,0,0.15);
      color:#8a1f1f;
      font-weight:700;
      line-height:1.35;
      font-size:0.98em;
    }

    /* Token container - TAILLE R√âDUITE pour AI Brainwashed */
    #tokenContainer{
      margin:20px auto 0;
      padding:16px;
      background:#fff;
      border-radius:16px;
      box-shadow:0 10px 30px rgba(0,0,0,0.15);
      max-width:420px;
      text-align:center;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    #tokenImage{
      max-width:100%;
      height:auto;
      border-radius:12px;
      display:block;
    }
    #tokenCanvas{
      width:100%;
      border-radius:12px;
      display:block;
    }

    #shareBtn{
      margin-top:16px;
      width:100%;
      padding:12px 16px;
      background:#0077b5;
      color:#fff;
      border:none;
      border-radius:12px;
      cursor:pointer;
      font-weight:900;
      font-size:1em;
      transition:0.2s;
    }
    #shareBtn:hover{background:#005885;}

    #restartBtn{
      margin-top:12px;width:100%;
      padding:12px;border:none;border-radius:12px;
      background:#37474f;color:#fff;cursor:pointer;font-weight:900;
    }

    @media (max-width: 480px) {
      h1#title {
        font-size: 1.4em;
      }
      .slider-container{
        max-width:320px;
        height:60px;
      }
      .slider-button{
        width:50px;
        height:50px;
      }
      .slider-text{
        font-size:0.7em;
      }
    }
  </style>
</head>

<body>
  <h1 id="title"></h1>
  <p class="subtitle">I Quit AI</p>

  <div class="container">
    <!-- ========== √âCRAN DE D√âMARRAGE ========== -->
    <div id="startScreen">
      <h2>üéÆ Ready Player One? üéÆ</h2>
      <div class="slider-container" id="sliderContainer">
        <div class="slider-track">
          <span class="slider-text">SLIDE TO START ‚û§</span>
        </div>
        <div class="slider-button" id="sliderButton">‚ñ∂</div>
      </div>
    </div>

    <!-- ========== QUIZ ========== -->
    <div id="quiz" class="hidden">
      <div id="timerDisplay">30</div>
      <div id="questionContainer"></div>
      <div class="options" id="optionsContainer"></div>
      <button id="nextBtn" disabled>Suivant</button>
      <div id="errorContainer" class="hidden"></div>
    </div>

    <!-- ========== R√âSULTATS ========== -->
    <div id="result" class="hidden">
      <p class="score" id="scoreDisplay"></p>
      <p class="feedback" id="feedbackDisplay"></p>
      <p class="streak" id="streakDisplay"></p>

      <div id="tokenContainer" class="hidden">
        <img id="tokenImage" class="hidden" alt="" />
        <canvas id="tokenCanvas" class="hidden" width="500" height="250"></canvas>
      </div>

      <button id="shareBtn" class="hidden">Partager sur LinkedIn</button>
      <div id="reviewContainer"></div>
      <button id="restartBtn">Rejouer maintenant</button>
    </div>
  </div>

  <script>
    // ========= AUDIO =========
    const gameboyAudio = new Audio("./Gameboy.mp3");
    gameboyAudio.preload = "auto";

    // ========= TITLE ANIMATION =========
    const colors = ["#FF4136","#FFDC00","#2ECC40","#0074D9","#FF851B","#B10DC9"];
    const titleContainer = document.getElementById("title");
    const parts = ["IQAI", "Test"];
    let colorIndex = 0;
    let letterElements = [];

    function buildTitle(){
      titleContainer.innerHTML = "";
      letterElements = [];
      
      // IQAI
      parts[0].split("").forEach((c,i)=>{
        const s = document.createElement("span");
        s.textContent = c;
        s.style.opacity = "0";
        s.style.color = colors[(colorIndex+i)%colors.length];
        titleContainer.appendChild(s);
        letterElements.push(s);
      });
      colorIndex += parts[0].length;

      // S√©parateur
      const sep = document.createElement("span");
      sep.textContent = " | ";
      sep.className = "title-sep";
      titleContainer.appendChild(sep);

      // Test
      parts[1].split("").forEach((c,i)=>{
        const s = document.createElement("span");
        s.textContent = c;
        s.style.opacity = "0";
        s.style.color = colors[(colorIndex+i)%colors.length];
        titleContainer.appendChild(s);
        letterElements.push(s);
      });
    }

    function animateTitle(){
      // Dur√©e audio Gameboy.mp3 ‚âà 1.8s, on veut que les lettres s'allument progressivement
      // puis le s√©parateur clignote sur la derni√®re note (autour de 1.6s)
      
      const totalLetters = letterElements.length;
      const letterDelay = 1400 / totalLetters; // 1.4s pour allumer toutes les lettres

      letterElements.forEach((el, i) => {
        setTimeout(() => {
          el.style.transition = "opacity 0.15s ease";
          el.style.opacity = "1";
        }, i * letterDelay);
      });

      // S√©parateur appara√Æt + clignote √† 1.6s (derni√®re note du jingle)
      setTimeout(() => {
        const sep = document.querySelector(".title-sep");
        sep.style.opacity = "1";
        sep.classList.add("blink");
      }, 1600);
    }

    buildTitle();

    // ========= SLIDER =========
    const startScreen = document.getElementById("startScreen");
    const sliderContainer = document.getElementById("sliderContainer");
    const sliderButton = document.getElementById("sliderButton");
    const quizDiv = document.getElementById("quiz");

    let isDragging = false;
    let startX = 0;
    let currentX = 0;
    const maxSlide = sliderContainer.offsetWidth - sliderButton.offsetWidth - 10;

    function startDrag(e){
      isDragging = true;
      startX = e.type.includes("mouse") ? e.clientX : e.touches[0].clientX;
      currentX = sliderButton.offsetLeft;
    }

    function drag(e){
      if(!isDragging) return;
      e.preventDefault();
      
      const clientX = e.type.includes("mouse") ? e.clientX : e.touches[0].clientX;
      let deltaX = clientX - startX;
      let newX = currentX + deltaX;

      if(newX < 5) newX = 5;
      if(newX > maxSlide) newX = maxSlide;

      sliderButton.style.left = newX + "px";

      // Si gliss√© √† fond
      if(newX >= maxSlide - 10){
        endDrag();
        launchGame();
      }
    }

    function endDrag(){
      if(!isDragging) return;
      isDragging = false;
      
      // Retour au d√©but si pas assez gliss√©
      if(sliderButton.offsetLeft < maxSlide - 10){
        sliderButton.style.transition = "left 0.3s ease";
        sliderButton.style.left = "5px";
        setTimeout(() => sliderButton.style.transition = "", 300);
      }
    }

    function launchGame(){
      // Jouer l'audio
      gameboyAudio.currentTime = 0;
      gameboyAudio.play().catch(e => console.warn("Audio play failed:", e));

      // Animation du titre
      animateTitle();

      // Cacher l'√©cran de d√©marrage apr√®s 2s
      setTimeout(() => {
        startScreen.classList.add("hidden");
        startGame();
      }, 2000);
    }

    // Events souris
    sliderButton.addEventListener("mousedown", startDrag);
    document.addEventListener("mousemove", drag);
    document.addEventListener("mouseup", endDrag);

    // Events tactiles
    sliderButton.addEventListener("touchstart", startDrag);
    document.addEventListener("touchmove", drag, {passive:false});
    document.addEventListener("touchend", endDrag);

    // ========= CONFIG =========
    const API_URL = "https://iqai-backend.vercel.app/api/quiz";

    // ========= STATE =========
    let questions = [];
    let current = 0;
    let score = 0;
    let userAnswers = [];
    let timerInterval = null;
    let timeLeft = 30;

    // ========= DOM =========
    const questionContainer = document.getElementById("questionContainer");
    const optionsContainer  = document.getElementById("optionsContainer");
    const nextBtn           = document.getElementById("nextBtn");
    const resultDiv         = document.getElementById("result");
    const timerDisplay      = document.getElementById("timerDisplay");

    const scoreDisplay      = document.getElementById("scoreDisplay");
    const feedbackDisplay   = document.getElementById("feedbackDisplay");
    const streakDisplay     = document.getElementById("streakDisplay");

    const tokenContainer    = document.getElementById("tokenContainer");
    const tokenImage        = document.getElementById("tokenImage");
    const tokenCanvas       = document.getElementById("tokenCanvas");

    const shareBtn          = document.getElementById("shareBtn");
    const restartBtn        = document.getElementById("restartBtn");
    const reviewContainer   = document.getElementById("reviewContainer");
    const errorContainer    = document.getElementById("errorContainer");

    // ========= STREAK =========
    const todayKey = new Date().toDateString();
    let streak = parseInt(localStorage.getItem("streak") || "0", 10);
    let lastPlayed = localStorage.getItem("lastPlayed");
    if (lastPlayed !== todayKey && lastPlayed !== new Date(Date.now()-86400000).toDateString()) streak = 0;

    // ========= ERRORS =========
    function showError(msg){
      errorContainer.classList.remove("hidden");
      errorContainer.className = "errorBox";
      errorContainer.textContent = msg;
    }
    function clearError(){
      errorContainer.classList.add("hidden");
      errorContainer.className = "";
      errorContainer.textContent = "";
    }

    // ========= AVOID =========
    function getAvoidList(){
      try{
        const raw = localStorage.getItem("iqai_avoid") || "[]";
        const arr = JSON.parse(raw);
        return Array.isArray(arr) ? arr.slice(-60) : [];
      }catch{
        return [];
      }
    }
    function pushAvoidFromQuiz(quiz){
      try{
        const avoid = getAvoidList();
        quiz.forEach(q => {
          const txt = String(q.q || "").trim();
          if (txt) avoid.push(txt);
        });
        localStorage.setItem("iqai_avoid", JSON.stringify(avoid.slice(-200)));
      }catch{}
    }

    // ========= NORMALIZE =========
    function normalizeQuiz(raw){
      if (!Array.isArray(raw)) return null;

      const arr = raw.slice(0, 10).map(x => ({
        q: String(x.q ?? "").trim(),
        options: Array.isArray(x.options) ? x.options.map(o => String(o).trim()).slice(0,4) : [],
        answer: String(x.answer ?? "").trim(),
        explanation: String(x.explanation ?? "").trim()
      })).filter(x => x.q && x.options.length === 4 && x.answer);

      return (arr.length === 10) ? arr : null;
    }

    // ========= LOAD =========
    async function loadQuestions(){
      const avoid = getAvoidList();

      const res = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        cache: "no-store",
        body: JSON.stringify({ avoid })
      });

      if(!res.ok){
        throw new Error("Le backend ne r√©pond pas (HTTP " + res.status + ").");
      }

      const raw = await res.json();
      const quiz = normalizeQuiz(raw);

      if(!quiz || quiz.length !== 10){
        throw new Error("Le quiz re√ßu est invalide. R√©essaie.");
      }

      questions = quiz;
      pushAvoidFromQuiz(quiz);
    }

    // ========= TIMER =========
    function startTimer(){
      stopTimer();
      timeLeft = 30;
      timerDisplay.textContent = timeLeft;
      timerDisplay.classList.remove("warning");

      timerInterval = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = timeLeft;

        if(timeLeft <= 10){
          timerDisplay.classList.add("warning");
        }

        if(timeLeft <= 0){
          stopTimer();
          autoNext();
        }
      }, 1000);
    }

    function stopTimer(){
      if(timerInterval){
        clearInterval(timerInterval);
        timerInterval = null;
      }
      timerDisplay.classList.remove("warning");
    }

    function autoNext(){
      // Temps √©coul√©, on passe √† la suivante sans r√©ponse
      current++;
      if(current < questions.length){
        showQuestion();
      } else {
        showResult();
      }
    }

    // ========= UI =========
    function showQuestion(){
      clearError();
      const q = questions[current];

      questionContainer.innerHTML = `<div class="question">${current+1}. ${q.q}</div>`;
      optionsContainer.innerHTML = "";

      nextBtn.disabled = (userAnswers[current] == null);
      nextBtn.textContent = (current === questions.length - 1) ? "Terminer" : "Suivant";

      q.options.forEach(opt=>{
        const btn = document.createElement("button");
        btn.textContent = opt;

        if (userAnswers[current] === opt) btn.classList.add("selected");

        btn.onclick = () => {
          userAnswers[current] = opt;
          Array.from(optionsContainer.children).forEach(b=>{
            b.classList.toggle("selected", b.textContent === opt);
          });
          nextBtn.disabled = false;
        };

        optionsContainer.appendChild(btn);
      });

      startTimer();
    }

    nextBtn.onclick = () => {
      stopTimer();
      const selected = userAnswers[current];
      if (selected === questions[current].answer) score++;
      current++;

      if (current < questions.length) showQuestion();
      else showResult();
    };

    // ========= TOKENS =========
    function drawMidToken(score){
      const ctx = tokenCanvas.getContext("2d");
      ctx.clearRect(0,0,500,250);

      const grad = ctx.createLinearGradient(0,0,500,250);
      grad.addColorStop(0, "#4facfe");
      grad.addColorStop(1, "#00f2fe");
      ctx.fillStyle = grad;
      ctx.fillRect(0,0,500,250);

      ctx.fillStyle = "#1a1a1a";
      ctx.textAlign = "center";
      ctx.font = "bold 28px 'Press Start 2P'";
      ctx.fillText("I QUIT AI üö™", 250, 95);

      ctx.font = "18px 'Press Start 2P'";
      ctx.fillText(`Score: ${score}/10`, 250, 145);

      ctx.font = "16px Inter";
      ctx.fillText("Keep going! üí™", 250, 190);
    }

    function drawPerfectToken(streak){
      const ctx = tokenCanvas.getContext("2d");
      ctx.clearRect(0,0,500,250);

      const grad = ctx.createLinearGradient(0,0,500,250);
      grad.addColorStop(0, "#f7d24c");
      grad.addColorStop(1, "#ff9f1a");
      ctx.fillStyle = grad;
      ctx.fillRect(0,0,500,250);

      ctx.fillStyle = "rgba(0,0,0,0.1)";
      ctx.beginPath();
      ctx.arc(420, 70, 50, 0, Math.PI*2);
      ctx.fill();

      ctx.fillStyle = "#1f2a30";
      ctx.textAlign = "center";
      ctx.font = "bold 26px 'Press Start 2P'";
      ctx.fillText("üèÜ CERTIFIED üèÜ", 250, 80);

      ctx.font = "bold 22px 'Press Start 2P'";
      ctx.fillText("SAFE BRAIN", 250, 130);

      ctx.font = "16px 'Press Start 2P'";
      ctx.fillText(`Streak: ${streak} days`, 250, 180);

      ctx.font = "14px Inter";
      ctx.fillText(new Date().toLocaleDateString("fr-FR"), 250, 220);
    }

    function showResult(){
      stopTimer();
      quizDiv.classList.add("hidden");
      resultDiv.classList.remove("hidden");

      scoreDisplay.textContent = `Votre score : ${score} / ${questions.length}`;
      feedbackDisplay.textContent =
        score === questions.length ? "Parfait ! Vous √™tes un g√©nie !" :
        score >= 7 ? "Tr√®s solide. Reviens demain." :
        score >= 4 ? "Bien jou√©, continue." :
        "Courage. Reviens demain.";

      // Streak
      streak++;
      localStorage.setItem("streak", String(streak));
      localStorage.setItem("lastPlayed", todayKey);
      streakDisplay.textContent = `Streak actuel : ${streak} jours`;

      // ===== TOKENS =====
      tokenContainer.classList.remove("hidden");

      tokenImage.classList.add("hidden");
      tokenImage.removeAttribute("src");
      tokenCanvas.classList.add("hidden");
      tokenCanvas.getContext("2d").clearRect(0,0,500,250);

      if (score < 6) {
        tokenImage.classList.remove("hidden");
        tokenImage.src = "./ai-brainwashed.jpg";
        tokenImage.alt = "AI BRAINWASHED";
      } else if (score < 10) {
        tokenCanvas.classList.remove("hidden");
        drawMidToken(score);
      } else {
        tokenCanvas.classList.remove("hidden");
        drawPerfectToken(streak);
      }

      // ===== Share button =====
      shareBtn.classList.remove("hidden");
      shareBtn.textContent =
        score < 6 ? "Partage le jeu avec tes amis (et sauve-les de l'IA !)" :
        score < 10 ? "Partage ton score et challenge tes amis !" :
        "Partage ton cerveau certifi√© 100% humain !";

      shareBtn.onclick = () => {
        const messages = {
          low: `üß†üí• J'ai fait ${score}/10 au IQAI Test... L'IA m'a eu ! Essaie de faire mieux : `,
          mid: `üß†‚úÖ Score de ${score}/10 au IQAI Test ! Je r√©siste √† l'IA. √Ä ton tour : `,
          perfect: `üèÜ 10/10 au IQAI Test ! Cerveau 100% humain certifi√©. Streak: ${streak} jours. Challenge-toi : `
        };
        const text = score < 6 ? messages.low : score < 10 ? messages.mid : messages.perfect;
        const url = "https://www.linkedin.com/sharing/share-offsite/?url=" +
          encodeURIComponent(window.location.href) +
          "&summary=" + encodeURIComponent(text);
        window.open(url, "_blank");
      };

      // ===== Review =====
      reviewContainer.innerHTML = "<h3>Review des questions</h3>";
      questions.forEach((q, i) => {
        const user = userAnswers[i];
        const isOk = (user != null && user === q.answer);

        const div = document.createElement("div");
        div.className = "reviewItem";
        div.innerHTML = `
          <strong>Q${i+1}:</strong> ${q.q}<br>
